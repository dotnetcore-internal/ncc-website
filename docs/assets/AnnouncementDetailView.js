import{A as $,_ as B}from"./ArticleAuthors.vue_vue_type_script_setup_true_lang.js";import{d as b,l as C,k as s,a0 as L,j as T,x as S,y as V,z as j,g as m,a5 as N,o as R,e as i,f as c,u as o,h as z,t as g,M as I,a4 as P}from"./vendor.js";import{u as U}from"./useEmitter.js";import{u as q}from"./uiStore.js";import{c as E}from"./usePageToolkits.js";import{a as F}from"./axios.js";import{_ as G}from"./MarkdownWorker.vue_vue_type_script_setup_true_lang.js";import{B as H}from"./BodyBlock.js";import{T as J}from"./TitleBlock.js";import{_ as K}from"./AnchorElement.vue_vue_type_script_setup_true_lang.js";import"./ContentModels.js";import"./preload-helper.js";import"./index2.js";import"./WaveLoading.js";import"./_plugin-vue_export-helper.js";import"./PlaceholderBlock.vue_vue_type_script_setup_true_lang.js";const O=async function(f,u,l=()=>{}){await F.get(f).then(function(r){u(r.data)}).catch(l)},Q={class:"content-paper relative"},W={class:"absolute top-10 left-5"},X={class:"text-center w-10/12 mx-auto lg:w-4/6 xl:1/2"},Y={class:"px-5 pt-1 text-sm text-gray-500"},ht=b({__name:"AnnouncementDetailView",setup(f){const u=I(),l=N(),r=U(),p=q(),d=C(p.locale),h=s(()=>u.params.pathMatch.join("/")),t=L({}),_=s(()=>`announcements/${h.value}/content`),v=async e=>{const a=e!=null?e:d.value,w=`/content/announcements/${h.value}/metadata.${a}.json`;await O(w,n=>{t.id=n.id,t.title=n.title,t.date=n.date,t.author=n.author,t.img=n.img,t.url=n.url,E(t.title,"direct")})},k=s(()=>t.title),y=s(()=>t.date),x=s(()=>(console.log(t),console.log(t.author),t.author)),A=(e,a)=>P(e,a,{locales:p}).value,D=T(),M=s(()=>D.value?"#f8f8f8":"#000000");return S(async()=>{r.on("toChangeLocale",async e=>{const a=e;d.value=a.locale;try{await v(a.locale),r.emit("toRerenderMarkdown",{source:_.value,locale:a.locale})}catch(w){await l.push({path:"/404"})}}),await v()}),V(()=>{r.off("toChangeLocale")}),(e,a)=>(R(),j(H,null,{default:m(()=>[i("div",Q,[i("div",W,[c(K,{href:"/announcements","route-name":"announcements",title:e.$t("media-announcements"),mode:"h5"},{default:m(()=>[c(o($),{theme:"filled",size:"36",fill:o(M)},null,8,["fill"])]),_:1},8,["title"])]),i("div",X,[c(J,{"with-placeholder":!1,"is-font-black":!1},{default:m(()=>[z(g(o(k)),1)]),_:1}),c(B,{author:o(x)},null,8,["author"]),i("div",Y,g(A(new Date(o(y)),e.$t("_common.date-format"))),1)]),c(G,{source:o(_),i18n:!0,"fallback-locale":"en","final-fallback-fn":()=>o(l).push({path:"/404"})},null,8,["source","final-fallback-fn"])])]),_:1}))}});export{ht as default};

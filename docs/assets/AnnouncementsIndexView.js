import{d as k,a0 as f,k as m,x as C,y as T,z as d,g as p,M as V,o as y,f as g,h as $,t as q,e as j,u as L,Z as R,a7 as S}from"./vendor.js";import{u as U}from"./uiStore.js";import{u as z}from"./useEmitter.js";import{c as D}from"./usePageToolkits.js";import{a as E}from"./axios.js";import{B as I}from"./BodyBlock.js";import{T as M}from"./TitleBlock.js";import{A as O,a as Z}from"./ArticleNav.js";import"./preload-helper.js";import"./_plugin-vue_export-helper.js";import"./PlaceholderBlock.vue_vue_type_script_setup_true_lang.js";import"./ArticleCard.js";import"./AnchorElement.vue_vue_type_script_setup_true_lang.js";const F=async function(e,o,s=()=>{}){await E.get(e).then(function(c){o(c.data)}).catch(s)},G=async function(e,o,s,c=()=>{}){e<1&&(e=1),await H(e-1,o,s,c)},H=async function(e,o,s,c=()=>{}){e<0&&(e=0);const i=e===0?`/api/announcements/list_${o}.json`:`/api/announcements/list_${e}_${o}.json`;await F(i,s,c)},J={class:"p-5"},ut=k({__name:"AnnouncementsIndexView",setup(e){D("media-announcements","i18n");const o=V(),s=S(),c=U(),i=z(),l=f([]),t=f({current:1,total:1}),h=(n,a)=>{l.length=0;for(const r of n)l.push(r);t.current=a.current,t.total=a.total},P=()=>t.current>=t.total?t.total:t.current<=0?1:t.current,w=()=>t.current<=1?1:t.current>t.total?t.total:t.current-1,_=()=>t.current>=t.total?t.total:t.current<=0?1:t.current+1,v=m(()=>t.current>1),A=m(()=>t.current<t.total),N=m(()=>t.total>1),u=async(n,a)=>{await G(n,a!=null?a:c.locale,r=>{h(r.list,r._page)},()=>{s.push({path:"/404"})})},x=async()=>{v.value&&await u(w())},b=async()=>{A.value&&await u(_())};return C(async()=>{const n=o.params.pageNo,a=parseInt(n!=null?n:"1");i.on("toChangeLocale",async r=>{const B=r;await u(P(),B.locale)}),await u(a)}),T(()=>{i.off("toChangeLocale")}),(n,a)=>(y(),d(I,null,{default:p(()=>[g(M,{"is-font-black":!1,"is-font-bold":!0},{default:p(()=>[$(q(n.$t("media-announcements")),1)]),_:1}),j("div",J,[g(O,{articles:l,"default-display-mode":"grid","base-url":"/announcements"},null,8,["articles"]),L(N)?(y(),d(Z,{key:0,descriptor:t,previous:async()=>await x(),next:async()=>await b(),first:async()=>await u(1),last:async()=>await u(t.total),go:async r=>await u(r),"hidden-if-btn-disabled":!0,"base-url":"/announcements"},null,8,["descriptor","previous","next","first","last","go"])):R("",!0)])]),_:1}))}});export{ut as default};

import{d as B,a0 as f,k as m,x as C,y as T,z as d,g as p,M as V,o as y,f as g,h as $,t as q,e as j,u as L,Z as R,a5 as S}from"./vendor.js";import{u as U}from"./uiStore.js";import{u as z}from"./useEmitter.js";import{c as D}from"./usePageToolkits.js";import{a as E}from"./axios.js";import{B as I}from"./BodyBlock.js";import{T as M}from"./TitleBlock.js";import{A as O}from"./ArticleCards.js";import{A as Z}from"./ArticleNav.js";import"./_plugin-vue_export-helper.js";import"./PlaceholderBlock.vue_vue_type_script_setup_true_lang.js";import"./ContentModels.js";import"./AnchorElement.vue_vue_type_script_setup_true_lang.js";import"./ArticleAsGrid.js";const F=async function(e,o,s=()=>{}){await E.get(e).then(function(c){o(c.data)}).catch(s)},G=async function(e,o,s,c=()=>{}){e<1&&(e=1),await H(e-1,o,s,c)},H=async function(e,o,s,c=()=>{}){e<0&&(e=0);const u=e===0?`/api/announcements/list_${o}.json`:`/api/announcements/list_${e}_${o}.json`;await F(u,s,c)},J={class:"p-5"},ut=B({__name:"AnnouncementsIndexView",setup(e){D("media-announcements","i18n");const o=V(),s=S(),c=U(),u=z(),l=f([]),t=f({current:1,total:1}),h=(n,a)=>{l.length=0;for(const r of n)l.push(r);t.current=a.current,t.total=a.total},P=()=>t.current>=t.total?t.total:t.current<=0?1:t.current,w=()=>t.current<=1?1:t.current>t.total?t.total:t.current-1,_=()=>t.current>=t.total?t.total:t.current<=0?1:t.current+1,b=m(()=>t.current>1),v=m(()=>t.current<t.total),A=m(()=>t.total>1),i=async(n,a)=>{await G(n,a!=null?a:c.locale,r=>{h(r.list,r._page)},()=>{s.push({path:"/404"})})},N=async()=>{b.value&&await i(w())},x=async()=>{v.value&&await i(_())};return C(async()=>{const n=o.params.pageNo,a=parseInt(n!=null?n:"1");u.on("toChangeLocale",async r=>{const k=r;await i(P(),k.locale)}),await i(a)}),T(()=>{u.off("toChangeLocale")}),(n,a)=>(y(),d(I,null,{default:p(()=>[g(M,{"is-font-black":!1,"is-font-bold":!0},{default:p(()=>[$(q(n.$t("media-announcements")),1)]),_:1}),j("div",J,[g(O,{articles:l,"default-display-mode":"list","base-url":"/announcements","display-author-mode":"all-but-first-avatar","enable-block-mode":!1,"enable-grid-mode":!1,"enable-card-mode":!1},null,8,["articles"]),L(A)?(y(),d(Z,{key:0,descriptor:t,previous:async()=>await N(),next:async()=>await x(),first:async()=>await i(1),last:async()=>await i(t.total),go:async r=>await i(r),"hidden-if-btn-disabled":!0,"base-url":"/announcements"},null,8,["descriptor","previous","next","first","last","go"])):R("",!0)])]),_:1}))}});export{ut as default};

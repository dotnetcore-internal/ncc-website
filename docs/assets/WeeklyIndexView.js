import{d as B,a0 as m,k as f,x as C,y as T,z as d,g as y,M as W,o as p,f as g,h as V,t as $,u as q,Z as j,a5 as L}from"./vendor.js";import{u as R}from"./uiStore.js";import{u as S}from"./useEmitter.js";import{c as U}from"./usePageToolkits.js";import{a as z}from"./axios.js";import{B as D}from"./BodyBlock.js";import{T as E}from"./TitleBlock.js";import{A as I}from"./ArticleCards.js";import{A as M}from"./ArticleNav.js";import"./_plugin-vue_export-helper.js";import"./PlaceholderBlock.vue_vue_type_script_setup_true_lang.js";import"./ContentModels.js";import"./AnchorElement.vue_vue_type_script_setup_true_lang.js";import"./ArticleAsGrid.js";const O=async function(e,o,s=()=>{}){await z.get(e).then(function(i){o(i.data)}).catch(s)},Z=async function(e,o,s,i=()=>{}){e<1&&(e=1),await F(e-1,o,s,i)},F=async function(e,o,s,i=()=>{}){e<0&&(e=0);const u=e===0?`/api/weekly/list_${o}.json`:`/api/weekly/list_${e}_${o}.json`;await O(u,s,i)},it=B({__name:"WeeklyIndexView",setup(e){U("media-weekly","i18n");const o=W(),s=L(),i=R(),u=S(),l=m([]),t=m({current:1,total:1}),w=(a,r)=>{l.length=0;for(const n of a)l.push(n);t.current=r.current,t.total=r.total},k=()=>t.current>=t.total?t.total:t.current<=0?1:t.current,P=()=>t.current<=1?1:t.current>t.total?t.total:t.current-1,h=()=>t.current>=t.total?t.total:t.current<=0?1:t.current+1,_=f(()=>t.current<t.total&&t.current>1),b=f(()=>t.current<t.total&&t.current>0),v=f(()=>t.total>1),c=async(a,r)=>{await Z(a,r!=null?r:i.locale,n=>{w(n.list,n._page)},()=>{s.push({path:"/404"})})},x=async()=>{_.value&&await c(P())},N=async()=>{b.value&&await c(h())};return C(async()=>{const a=o.params.pageNo,r=parseInt(a!=null?a:"1");u.on("toChangeLocale",async n=>{const A=n;await c(k(),A.locale)}),await c(r)}),T(()=>{u.off("toChangeLocale")}),(a,r)=>(p(),d(D,null,{default:y(()=>[g(E,{"is-font-black":!1,"is-font-bold":!0},{default:y(()=>[V($(a.$t("media-weekly")),1)]),_:1}),g(I,{articles:l,"default-display-mode":"list","base-url":"/weekly","enable-card-mode":!1,"enable-block-mode":!1,"enable-grid-mode":!1},null,8,["articles"]),q(v)?(p(),d(M,{key:0,descriptor:t,previous:async()=>await x(),next:async()=>await N(),first:async()=>await c(1),last:async()=>await c(t.total),go:async n=>await c(n),"hidden-if-btn-disabled":!0,"base-url":"/weekly"},null,8,["descriptor","previous","next","first","last","go"])):j("",!0)]),_:1}))}});export{it as default};

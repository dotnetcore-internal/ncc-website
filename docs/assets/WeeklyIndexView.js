import{d as B,a0 as f,k as m,x as C,y as S,z as y,h as d,M as T,o as p,g as w,b as W,t as V,u as $,Z as q,a5 as j}from"./vendor.js";import{u as L}from"./uiStore.js";import{u as R}from"./useEmitter.js";import{c as U}from"./usePageToolkits.js";import{a as z}from"./axios.js";import{B as D}from"./BodyBlock.js";import{T as E}from"./TitleBlock.js";import{A as I}from"./ArticleCards.js";import{A as O}from"./ArticleNav.js";import"./_plugin-vue_export-helper.js";import"./PlaceholderBlock.vue_vue_type_script_setup_true_lang.js";import"./AnchorElement.vue_vue_type_script_setup_true_lang.js";import"./ArticleAsGrid.js";import"./ContentModels.js";const Z=async function(a,o,s=()=>{}){await z.get(a).then(function(i){o(i.data)}).catch(s)},F=async function(a,o,s,i=()=>{}){a<1&&(a=1),await G(a-1,o,s,i)},G=async function(a,o,s,i=()=>{}){a<0&&(a=0);const u=a===0?`/api/weekly/list_${o}.json`:`/api/weekly/list_${a}_${o}.json`;await Z(u,s,i)},ie=B({__name:"WeeklyIndexView",setup(a){U("media-weekly","i18n");const o=T(),s=j(),i=L(),u=R(),l=f([]),e=f({current:1,total:1,name:"",nameSeries:[]}),k=(n,t)=>{l.length=0;for(const r of n)l.push(r);if(e.current=t.current,e.total=t.total,e.name=t.name,e.nameSeries=[],t.nameSeries)for(const r of t.nameSeries)e.nameSeries.push(r)},g=()=>e.current>=e.total?e.total:e.current<=0?1:e.current,h=()=>e.current<=1?1:e.current>e.total?e.total:e.current-1,P=()=>e.current>=e.total?e.total:e.current<=0?1:e.current+1,b=m(()=>e.current<e.total&&e.current>1),_=m(()=>e.current<e.total&&e.current>0),v=m(()=>e.total>1),c=async(n,t)=>{await F(n,t!=null?t:i.locale,r=>{k(r.list,r._page)},()=>{s.push({path:"/404"})})},x=async()=>{b.value&&await c(h())},N=async()=>{_.value&&await c(P())};return C(async()=>{const n=o.params.pageNo,t=parseInt(n!=null?n:"1");u.on("toChangeLocale",async r=>{const A=r;await c(g(),A.locale)}),await c(t)}),S(()=>{u.off("toChangeLocale")}),(n,t)=>(p(),y(D,null,{default:d(()=>[w(E,{"is-font-black":!1,"is-font-bold":!0},{default:d(()=>[W(V(n.$t("media-weekly")),1)]),_:1}),w(I,{articles:l,"default-display-mode":"list","base-url":"/weekly","enable-card-mode":!1,"enable-block-mode":!1,"enable-pure-block-mode":!1,"enable-grid-mode":!1},null,8,["articles"]),$(v)?(p(),y(O,{key:0,descriptor:e,previous:async()=>await x(),next:async()=>await N(),first:async()=>await c(1),last:async()=>await c(e.total),go:async r=>await c(r),"hidden-if-btn-disabled":!0,"base-url":"/weekly"},null,8,["descriptor","previous","next","first","last","go"])):q("",!0)]),_:1}))}});export{ie as default};

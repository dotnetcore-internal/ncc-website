import{d as B,a0 as f,k as m,x as C,y as T,z as d,g as p,M as V,o as y,f as w,h as $,t as q,u as j,Z as L,a5 as R}from"./vendor.js";import{u as S}from"./uiStore.js";import{u as U}from"./useEmitter.js";import{c as z}from"./usePageToolkits.js";import{a as D}from"./axios.js";import{B as E}from"./BodyBlock.js";import{T as I}from"./TitleBlock.js";import{A as M}from"./ArticleCards.js";import{A as O}from"./ArticleNav.js";import"./preload-helper.js";import"./_plugin-vue_export-helper.js";import"./PlaceholderBlock.vue_vue_type_script_setup_true_lang.js";import"./ContentModels.js";import"./AnchorElement.vue_vue_type_script_setup_true_lang.js";import"./ArticleAsGrid.js";const Z=async function(e,o,n=()=>{}){await D.get(e).then(function(i){o(i.data)}).catch(n)},F=async function(e,o,n,i=()=>{}){e<1&&(e=1),await G(e-1,o,n,i)},G=async function(e,o,n,i=()=>{}){e<0&&(e=0);const u=e===0?`/api/news/list_${o}.json`:`/api/news/list_${e}_${o}.json`;await Z(u,n,i)},ct=B({__name:"NewsIndexView",setup(e){z("media-news","i18n");const o=V(),n=R(),i=S(),u=U(),l=f([]),t=f({current:1,total:1}),g=(a,r)=>{l.length=0;for(const s of a)l.push(s);t.current=r.current,t.total=r.total},h=()=>t.current>=t.total?t.total:t.current<=0?1:t.current,P=()=>t.current<=1?1:t.current>t.total?t.total:t.current-1,b=()=>t.current>=t.total?t.total:t.current<=0?1:t.current+1,N=m(()=>t.current<t.total&&t.current>1),_=m(()=>t.current<t.total&&t.current>0),v=m(()=>t.total>1),c=async(a,r)=>{await F(a,r!=null?r:i.locale,s=>{g(s.list,s._page)},()=>{n.push({path:"/404"})})},x=async()=>{N.value&&await c(P())},k=async()=>{_.value&&await c(b())};return C(async()=>{const a=o.params.pageNo,r=parseInt(a!=null?a:"1");u.on("toChangeLocale",async s=>{const A=s;await c(h(),A.locale)}),await c(r)}),T(()=>{u.off("toChangeLocale")}),(a,r)=>(y(),d(E,null,{default:p(()=>[w(I,{"is-font-black":!1,"is-font-bold":!0},{default:p(()=>[$(q(a.$t("media-news")),1)]),_:1}),w(M,{articles:l,"default-display-mode":"grid","display-author-mode":"all-but-name","display-author-by":!0,"base-url":"/news","enable-card-mode":!1,"enable-block-mode":!1,"enable-list-mode":!1},null,8,["articles"]),j(v)?(y(),d(O,{key:0,descriptor:t,previous:async()=>await x(),next:async()=>await k(),first:async()=>await c(1),last:async()=>await c(t.total),go:async s=>await c(s),"hidden-if-btn-disabled":!0,"base-url":"/news"},null,8,["descriptor","previous","next","first","last","go"])):L("",!0)]),_:1}))}});export{ct as default};

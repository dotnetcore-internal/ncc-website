import{d as C,l as N,k as n,a0 as b,x as B,y as M,z as T,g as w,a7 as D,o as L,e as o,f as g,h as $,t as v,u as i,M as R,a4 as S}from"./vendor.js";import{u as V}from"./useEmitter.js";import{u as A}from"./uiStore.js";import{c as U}from"./usePageToolkits.js";import{a as j}from"./axios.js";import{_ as q}from"./MarkdownBlock.vue_vue_type_script_setup_true_lang.js";import{B as z}from"./BodyBlock.js";import{T as E}from"./TitleBlock.js";import"./preload-helper.js";import"./WaveLoading.js";import"./_plugin-vue_export-helper.js";import"./PlaceholderBlock.vue_vue_type_script_setup_true_lang.js";const F=""+new URL("../images/logo-seq-svg.svg",import.meta.url).href,I=async function(u,l,c=()=>{}){await j.get(u).then(function(s){l(s.data)}).catch(c)},G={class:"text-center w-10/12 mx-auto lg:w-4/6 xl:1/2"},H=o("div",{class:"w-12 rounded-full overflow-hidden mx-auto mt-8"},[o("img",{src:F,alt:"The NCC"})],-1),J=o("div",{class:"text-center p-3 border-b-2 border-gray-300 w-72 mx-auto"}," The NCC ",-1),K={class:"px-5 pt-1 text-sm text-gray-500"},O={class:"content-paper"},ct=C({__name:"NewsDetailView",setup(u){const l=R(),c=D(),s=V(),m=A(),d=N(m.locale),p=n(()=>l.params.pathMatch.join("/")),e=b({}),f=n(()=>`/articles/news/${p.value}/content`),h=async t=>{const a=t!=null?t:d.value,_=`/articles/news/${p.value}/metadata.${a}.json`;await I(_,r=>{e.id=r.id,e.title=r.title,e.date=r.date,e.img=r.img,e.url=r.url,U(e.title,"direct")})},x=n(()=>e.title),y=n(()=>e.date),k=(t,a)=>S(t,a,{locales:m}).value;return B(async()=>{s.on("toChangeLocale",async t=>{const a=t;d.value=a.locale;try{await h(a.locale),s.emit("toRerenderMarkdown",{source:f.value,locale:a.locale})}catch(_){await c.push({path:"/404"})}}),await h()}),M(()=>{s.off("toChangeLocale")}),(t,a)=>(L(),T(z,null,{default:w(()=>[o("div",G,[g(E,{"with-placeholder":!1,"is-font-black":!1},{default:w(()=>[$(v(i(x)),1)]),_:1}),H,J,o("div",K,v(k(new Date(i(y)),t.$t("_common.date-format"))),1)]),o("div",O,[g(q,{source:i(f),i18n:!0,"fallback-locale":"en","final-fallback-fn":()=>i(c).push({path:"/404"})},null,8,["source","final-fallback-fn"])])]),_:1}))}});export{ct as default};

import{A as B,_ as b}from"./ArticleAuthors.vue_vue_type_script_setup_true_lang.js";import{d as A,l as N,k as r,a0 as C,j as L,x as T,y as S,z as V,h as m,a5 as j,o as R,f as i,g as c,u as o,b as z,t as k,M as I,a4 as P}from"./vendor.js";import{u as U}from"./useEmitter.js";import{u as q}from"./uiStore.js";import{c as E}from"./usePageToolkits.js";import{a as F}from"./axios.js";import{_ as G}from"./MarkdownWorker.vue_vue_type_script_setup_true_lang.js";import{B as H}from"./BodyBlock.js";import{T as J}from"./TitleBlock.js";import{_ as K}from"./AnchorElement.vue_vue_type_script_setup_true_lang.js";import"./ContentModels.js";import"./index2.js";import"./WaveLoading.js";import"./_plugin-vue_export-helper.js";import"./PlaceholderBlock.vue_vue_type_script_setup_true_lang.js";const O=async function(f,u,l=()=>{}){await F.get(f).then(function(n){u(n.data)}).catch(l)},Q={class:"content-paper relative"},W={class:"absolute top-10 left-5"},X={class:"text-center w-10/12 mx-auto lg:w-4/6 xl:1/2"},Y={class:"px-5 pt-1 text-sm text-gray-500"},pt=A({__name:"NewsDetailView",setup(f){const u=I(),l=j(),n=U(),d=q(),p=N(d.locale),h=r(()=>u.params.pathMatch.join("/")),e=C({}),_=r(()=>`news/${h.value}/content`),w=async t=>{const a=t!=null?t:p.value,v=`/content/news/${h.value}/metadata.${a}.json`;await O(v,s=>{e.id=s.id,e.title=s.title,e.date=s.date,e.author=s.author,e.img=s.img,e.url=s.url,E(e.title,"direct")})},y=r(()=>e.title),g=r(()=>e.date),x=r(()=>e.author),D=(t,a)=>P(t,a,{locales:d}).value,M=L(),$=r(()=>M.value?"#f8f8f8":"#000000");return T(async()=>{n.on("toChangeLocale",async t=>{const a=t;p.value=a.locale;try{await w(a.locale),n.emit("toRerenderMarkdown",{source:_.value,locale:a.locale})}catch(v){await l.push({path:"/404"})}}),await w()}),S(()=>{n.off("toChangeLocale")}),(t,a)=>(R(),V(H,null,{default:m(()=>[i("div",Q,[i("div",W,[c(K,{href:"/news","route-name":"news",title:t.$t("media-news"),mode:"h5"},{default:m(()=>[c(o(B),{theme:"filled",size:"36",fill:o($)},null,8,["fill"])]),_:1},8,["title"])]),i("div",X,[c(J,{"with-placeholder":!1,"is-font-black":!1},{default:m(()=>[z(k(o(y)),1)]),_:1}),c(b,{author:o(x)},null,8,["author"]),i("div",Y,k(D(new Date(o(g)),t.$t("_common.date-format"))),1)]),c(G,{source:o(_),i18n:!0,"fallback-locale":"en","final-fallback-fn":()=>o(l).push({path:"/404"})},null,8,["source","final-fallback-fn"])])]),_:1}))}});export{pt as default};

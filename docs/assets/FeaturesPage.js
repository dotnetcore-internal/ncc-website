import{_ as D}from"./preload-helper.js";import{d as G,l as y,aa as M,ab as N,s as O,a0 as j,k as A,x as K,n as E,y as U,a as c,e as r,f as T,g as z,F as h,p as W,i as q,M as H,o as l,b as k,a1 as b,t as w,w as J,u as I}from"./vendor.js";import{u as Q}from"./useEmitter.js";import{u as X}from"./uiStore.js";import{B as Y}from"./BodyBlock.js";import{_ as Z}from"./MarkdownRenderer.vue_vue_type_script_setup_true_lang.js";import{_ as ee}from"./_plugin-vue_export-helper.js";function te(u,p){let i=Promise.resolve();return function(...v){i=i.then(()=>{u(...v)}),setTimeout(()=>{i=Promise.resolve()},p)}}const se=u=>(W("data-v-25b5cce7"),u=u(),q(),u),oe={class:"feature-index xl:flex-none"},ne=["href","onClick"],ae={class:"xl:flex-1 overflow-hidden p-4"},re=["id"],ie=["id"],ce={class:"feature-item-title"},le=se(()=>r("div",{class:"feature-end relative"},null,-1)),ue=G({__name:"FeaturesPage",setup(u){const p=H(),i=Q(),v=X(),F=y(null);M(F,([{isIntersecting:e}])=>{g.value=!e});const{y:L}=N();O(L,async e=>{te(()=>{let o=document.getElementsByTagName("section");for(let t=o.length-1;t>=0;t--)if(o[t].offsetTop<e+112){f.value=o[t].id;break}},1e3)()});const d=j([]),_=j([]),P=e=>{d.splice(0,d.length,...e)},C=e=>{_.splice(0,_.length,...e)},$=e=>`../../../content/projects/${p.params.id}/features${e?`.${e}`:`.${v.locale}`}.json`,B=async e=>await D(()=>import(e),[],import.meta.url),g=y(!1),f=y(""),R=e=>{const o=document.getElementById(`${e}-anchor`);o&&o.scrollIntoView({behavior:"smooth"})},V=A(()=>{const e=_.reduce((s,n)=>{const{group:a,...m}=n;return s[a!=null?a:"unclassified-1"]||(s[a!=null?a:"unclassified-1"]=[]),s[a].push(m),s},{}),o=Object.keys(e).sort((s,n)=>{const a=d.find(x=>x.id===s),m=d.find(x=>x.id===n);return a&&m?a.sort-m.sort:0}),t={};for(const s of o){const n=e[s];t[s]||(t[s]=[]);for(const a of n)t[s].push(a)}return t}),S=e=>d.find(o=>o.id===e);return K(()=>{const e=$();B(e).then(o=>{var t,s;P(o.groups),C(o.features),f.value=(s=(t=o.features[0])==null?void 0:t.id)!=null?s:""}),i.on("toChangeLocale",async o=>{const t=o;await E(()=>{const s=$(t.locale);B(s).then(n=>{P(n.groups),C(n.features)})})}),E(()=>{i.emit("toChangeProjectPaper",{paper:"features"})})}),U(()=>{i.off("toChangeLocale")}),(e,o)=>(l(),c(h,null,[r("div",{class:"absolute -mt-20 w-0.5 h-0.5 bg-transparent",ref_key:"focusedRef",ref:F},null,512),T(Y,{class:"xl:flex overflow-hidden"},{default:z(()=>[r("div",oe,[r("div",{class:k({fixed:g.value,"top-28":g.value})},[(l(!0),c(h,null,b(I(V),(t,s)=>(l(),c("div",{key:s,class:"feature-index-group"},[r("div",{class:k(["feature-index-group-title overflow-hidden",{"feature-index-group-title-hide":S(s).hidden}])},w(S(s).title),3),r("ul",null,[(l(!0),c(h,null,b(t,n=>(l(),c("li",{key:n.id,class:"feature-index-text"},[r("a",{href:`#${n.id}`,class:k({"text-pink-500":f.value===n.id,"text-black dark:text-white":f.value!==n.id,"feature-index-current":f.value===n.id}),onClick:J(a=>R(n.id),["prevent"])},w(n.title),11,ne)]))),128))])]))),128))],2)]),r("div",ae,[(l(!0),c(h,null,b(_,t=>(l(),c("section",{key:t.id,id:t.id,class:"feature-item"},[r("div",{class:"absolute -mt-28 bg-transparent",id:`${t.id}-anchor`},null,8,ie),r("div",ce,w(t.title),1),T(Z,{source:`projects/${I(p).params.id}/features/${t.id}`,i18n:!0,"fallback-locale":"en","include-file-extension":!0,"file-extension":".md","retry-timeout":"1000","redirect-to404":!1},null,8,["source"])],8,re))),128))])]),_:1}),le],64))}});const ge=ee(ue,[["__scopeId","data-v-25b5cce7"]]);export{ge as default};

import{g as l,a as j,u as g,b as y}from"./useResource.js";import{a as p}from"./axios.js";const m=async function(e="en",s,t=()=>{}){await p.get(`/api/projects-list.${e}.json`).then(function(o){s(o.data)}).catch(t)},d=1,f=(e=0)=>e<d,h=async function(e,s=()=>{}){await p.get("/api/projects/license-cross.json").then(function(t){e(t.data)}).catch(s)},P=async function(e,s,t=()=>{}){await p.get(`/api/projects/${e}/metadata.json`).then(function(o){s(o.data)}).catch(t)},b=async function(e,s,t,o=()=>{}){const r=e&&e.length>0?`/api/projects/${s}/profile.${e}.json`:`/api/projects/${s}/profile.en.json`;await p.get(r).then(function(a){t(a.data)}).catch(o)},c=new Map;c.set("dev-fx",1);c.set("infra-middleware",2);c.set("data",3);c.set("application-library",4);c.set("tools-env",5);c.set("ui",6);c.set("labs",7);c.set("translation",8);c.set("other",9);const i=new Map;i.set("top-level",1);i.set("incubation",2);i.set("sandbox",3);i.set("labs",4);i.set("translation",5);i.set("archived",6);i.set("other",7);const v=(e,s)=>{var t,o;return((t=c.get(e))!=null?t:0)-((o=c.get(s))!=null?o:0)},w=(e,s)=>{var t,o;return((t=i.get(e))!=null?t:0)-((o=i.get(s))!=null?o:0)},L=async(e,s,t,o,r="project-list-api")=>{const a=l(r,e);a&&!f(Number.parseInt(a._metadata.version))?(s(a.projects),t&&t(a._catalogues)):await m(e,n=>{s(n.projects),t&&t(n._catalogues),g(r,e,n)},()=>{o&&o()})},N=(e,s)=>s==="full"?e.filter(t=>t.status!=="other"):s==="all"?e.filter(t=>t.status!=="labs"&&t.status!=="translation"&&t.status!=="other"):e.filter(t=>t.status===s),_=(e,s="asc")=>e.sort((t,o)=>s==="asc"?t.name.localeCompare(o.name):o.name.localeCompare(t.name)),A=e=>{const s=e.reduce((r,a)=>{const{catalogue:n,...u}=a;return r[n]||(r[n]=[]),r[n].push(u),r},{}),t=Object.keys(s).map(String).sort(v),o={};for(const r of t){const a=s[r];o[r]||(o[r]=[]);for(const n of a)o[r].push(n)}return o},M=e=>{const s=N(e,"all").reduce((r,a)=>{const{status:n}=a;return r[n]||(r[n]=[]),r[n].push(a),r},{}),t=Object.keys(s).map(String).sort(w),o={};for(const r of t){const a=s[r];o[r]||(o[r]=[]);for(const n of a)o[r].push(n)}return o},q=e=>e.reduce((s,t)=>{const{name:o}=t,r=o.charAt(0).toUpperCase();return s[r]||(s[r]=[]),s[r].push(t),s},{}),x=async(e,s,t="project-license-api")=>{const o=j(t);o&&!f(Number.parseInt(o._metadata.version))?e(o.licenses):await h(r=>{e(r.licenses),y(t,r)},()=>{s&&s()})},I=async(e,s,t,o="project-metadata-api")=>{const r=`${o}/${e}`,a=j(r);a&&!f(Number.parseInt(a._metadata.version))?s(a):await P(e,n=>{s(n),y(r,n)},()=>{t&&t()})},B=async(e,s,t,o,r="project-profile-api")=>{const a=`${r}/${s}`,n=l(a,e);n&&!f(Number.parseInt(n._metadata.version))?t(n):await b(e,s,u=>{t(u),g(a,e,u)},()=>{o&&o()})};export{A as a,M as b,I as c,B as d,x as e,N as f,q as g,L as l,_ as s};
